<!--components/sidebar.wxml-->
<view class="page">
    <view class="overlay {{side.newopen?'hidden':''}}" bindtap="clickGreyMask"></view>
    <view class="content {{side.newopen?'':'state'}}">
        <t-cell leftIcon="logo-codepen" hover style="padding-top: 60px;"  description="分享得 30 万象晶~">
            <view slot="title"><text>万象晶: </text><text style="background-color: rgb(255, 60, 0); border-radius: 5px;padding-left: 6px; padding-right: 6px; padding-top: 3px; padding-bottom: 3px; color: white; margin-right: 5px;">{{crystalNum}}</text><text>个</text></view>
        </t-cell>
        <t-cell leftIcon="logo-codepen" hover description="能量用于对话喔">
            <view slot="title"><text>万象能量: </text><text style="background-color: rgba(36, 119, 249, 1); border-radius: 5px;padding-left: 6px; padding-right: 6px; padding-top: 3px; padding-bottom: 3px; color: white; margin-right: 5px;">{{restUsageNum}}</text><text>个</text></view>
        </t-cell>
        <!-- <t-cell title="加入讨论小组" leftIcon="qrcode" hover arrow bindtap="clickQrCode"/> -->
        <!-- <t-divider /> -->
        <t-cell title="万象分享" leftIcon="share" hover description="点击右上角三点分享喔" />
        <t-cell title="签到领能量" description="完全随机" leftIcon="calendar" hover arrow bindtap="clickSignInText"/>
        <t-cell title="万象兑换" leftIcon="swap" hover arrow bindtap="clickCodeExchange" description="请找到神秘的开发者~"/>
        <t-cell title="万象虚拟人" leftIcon="user-talk" hover arrow bindtap="clickRoleChooseSetting" description="和他们聊聊叭"/>
    </view>

    <view class="popup {{isExchangePopupVisible ? 'visible popup-animation' : 'hidden'}}" bindtap="hidePopup">
        <view class="popup-content" catchtap="stopPropagation">
            <input class="input" placeholder="请输入兑换码" bindinput="onInput" value="{{exchangeCodeInputValue}}" />
            <button class="confirm-btn" hover-class='button-ripple' bindtap="onConfirm">确认</button>
        </view>
    </view>
</view>

<t-popup visible="{{qrCodePopVisible}}" bind:visible-change="onVisibleChange" placement="center">
    <view class="block">
        <t-image id="loading-img-custom" shape="round" loading="slot" width="300" height="466" show-menu-by-longpress="true" src="https://www.yubanstar.top/pic?filename=group.jpg">
            <t-loading slot="loading" theme="circular" size="40rpx" loading />
        </t-image>
        <t-icon t-class="close-btn" name="close-circle" size="32" color="#fff" bind:tap="onClose" />
    </view>
</t-popup>

<person-select-group id="role" style="position: absolute; top: 0;left: 0; width: 100%;" bind:partnerChange="onPartnerChange"/>